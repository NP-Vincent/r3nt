<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>r3nt by SQMU — Rent with USDC</title>
  <meta name="description" content="r3nt is a lightweight Farcaster Mini App for renting with USDC. Simple listings for landlords, straightforward bookings for tenants. Built by SQMU, the platform for tokenised real estate." />

  <!-- Farcaster Mini App button (optional on web previews) -->
  <meta name="fc:miniapp" content='{
    "version":"1",
    "imageUrl":"https://r3nt.sqmu.net/assets/icon.png",
    "button":{
      "title":"Open r3nt",
      "action":{
        "type":"launch_miniapp",
        "name":"r3nt",
        "url":"https://r3nt.sqmu.net/index.html",
        "splashImageUrl":"https://r3nt.sqmu.net/assets/splashscreen.png",
        "splashBackgroundColor":"#FFFFFF"
      }
    }
  }' />

  <style>
    :root {
      --fg:#0f172a; --muted:#475569; --bg:#ffffff; --card:#f8fafc;
      --primary:#1f6feb; --primary-ink:#ffffff;
      --cta:#10b981; --cta-ink:#ffffff;
      --stroke:#e2e8f0;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:920px;margin:0 auto;padding:32px 16px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    .brand{font-weight:800;letter-spacing:.3px;font-size:1.3rem}
    .pill{display:inline-block;padding:2px 10px;border-radius:999px;background:#e6f4ff;color:#075985;font-weight:600;font-size:.8rem}
    .beta-note{font-size:.9rem;margin:-12px 0 16px}
    .hero{display:grid;grid-template-columns:1fr;gap:18px;padding:22px;border:1px solid var(--stroke);border-radius:16px;background:var(--card)}
    h1{font-size:1.8rem;line-height:1.2;margin:0}
    p.lead{font-size:1.05rem;color:var(--muted);margin:.25rem 0 0}
    .cta-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
    .btn{display:inline-block;padding:12px 16px;border-radius:10px;border:1px solid var(--stroke);font-weight:700;text-decoration:none}
    .btn.primary{background:var(--cta);color:var(--cta-ink);border-color:transparent}
    .btn.secondary{background:#eef2ff;color:#3730a3;border-color:transparent}
    .btn.outline{background:transparent;color:var(--primary);}
    nav{margin-bottom:16px;display:flex;align-items:center;flex-wrap:wrap;gap:10px}
    nav a{color:var(--primary);font-weight:600;text-decoration:none}
    .back-button{appearance:none;border:1px solid var(--stroke);background:#fff;color:var(--fg);padding:8px 12px;border-radius:999px;font-weight:600;display:inline-flex;align-items:center;gap:6px;cursor:pointer;}
    .back-button span{font-size:1rem;line-height:1;}
    .back-button[hidden]{display:none;}
    .back-button:focus-visible{outline:2px solid var(--primary);outline-offset:2px;}
    .version-badge{display:inline-block;margin-left:8px;padding:2px 6px;border-radius:8px;font-size:.65rem;letter-spacing:.08em;text-transform:uppercase;background:#e2e8f0;color:#475569}
    section{margin-top:28px;padding-top:8px}
    h2{font-size:1.15rem;margin:0 0 8px}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    .card{padding:16px;border:1px solid var(--stroke);border-radius:12px;background:#fff}
    .muted{color:var(--muted)}
    .role-onboarding{margin-top:32px}
    .role-selector{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px}
    .role-tab{appearance:none;border:1px solid var(--stroke);background:#fff;color:var(--muted);padding:10px 14px;border-radius:999px;font-weight:600;cursor:pointer;transition:all .15s ease}
    .role-tab[aria-selected="true"],.role-tab:focus-visible{outline:none;border-color:var(--primary);color:var(--primary);box-shadow:0 0 0 3px rgba(31,111,235,0.12)}
    .role-panels{border:1px solid var(--stroke);border-radius:16px;background:var(--card);padding:18px}
    .role-panel{display:none}
    .role-panel.active{display:block}
    .role-panel h3{margin:0 0 8px;font-size:1.15rem}
    .role-panel p{margin:0;color:var(--muted)}
    .role-panel ul{margin:12px 0 0;padding-left:20px;color:var(--muted)}
    .role-actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:16px}
    @media (min-width: 800px){
      .hero{grid-template-columns:1.3fr .7fr}
      .grid{grid-template-columns:1fr 1fr}
    }
    footer{margin-top:32px;padding-top:12px;border-top:1px solid var(--stroke, #e2e8f0);font-size:.9rem;color:var(--muted, #475569);text-align:center}
  </style>
  <script src="./js/dev-settings.js"></script>
  <script src="./js/dev-error-console.js"></script>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">r3nt by SQMU</div>
    </header>

    <div class="muted beta-note">early beta.</div>

    <nav>
      <button type="button" class="back-button" data-back-button hidden aria-label="Go back">
        <span aria-hidden="true">←</span>
        Back
      </button>
      <a href="./index.html">Home</a>
      <a href="./tenant.html">Tenant</a>
      <a href="./landlord.html">Landlord</a>
      <a href="./investor.html">Investor</a>
      <a href="./agent.html">Agent</a>
      <a href="./admin.html">Admin</a>
      <span class="version-badge" data-version></span>
    </nav>

    <div class="hero">
      <div>
        <h1>Simple. Stable. On-chain. Tokenised.</h1>
        <p class="lead">
          r3nt is a lightweight interface for tenants and landlords to transact in USDC with minimal friction. Listings are posted from Farcaster Casts; bookings and payments stay on-chain.
        </p>
        <div class="cta-row">
          <a class="btn primary" href="./tenant.html">I’m a Tenant</a>
          <a class="btn secondary" href="./landlord.html">I’m a Landlord</a>
          <a class="btn outline" href="./investor.html">I’m an Investor</a>
          <a class="btn outline" href="./agent.html">I’m an Agent</a>
        </div>
      </div>
      <div class="card">
        <strong>At a glance</strong>
        <ul class="muted" style="margin:8px 0 0; padding-left:18px">
          <li>Pay and settle in USDC</li>
          <li>Listings linked to Casts</li>
          <li>Works inside Farcaster</li>
        </ul>
      </div>
    </div>

    <section class="role-onboarding">
      <h2>Start with your role</h2>
      <div class="muted">Pick the role that matches how you use r3nt. Actions and links adjust automatically.</div>
      <div class="role-selector" role="tablist" aria-label="Role onboarding">
        <button type="button" class="role-tab" data-role-button="tenant" aria-selected="true">Tenant</button>
        <button type="button" class="role-tab" data-role-button="landlord">Landlord</button>
        <button type="button" class="role-tab" data-role-button="agent">Agent</button>
        <button type="button" class="role-tab" data-role-button="investor">Investor</button>
      </div>
      <div class="role-panels">
        <div class="role-panel active" data-role-panel="tenant" role="tabpanel">
          <h3>Tenant onboarding</h3>
          <p>Preview listings, secure a view pass and book with USDC.</p>
          <ul>
            <li>Connect your wallet inside Farcaster to unlock booking actions.</li>
            <li>Select stay dates with the booking planner and review deposits up front.</li>
            <li>Complete on-chain checkout — deposits stay escrowed until released.</li>
          </ul>
          <div class="role-actions">
            <a class="btn primary" href="./tenant.html">Open tenant console</a>
            <a class="btn outline" href="./index.html#how-it-works">See how it works</a>
          </div>
        </div>
        <div class="role-panel" data-role-panel="landlord" role="tabpanel" hidden>
          <h3>Landlord onboarding</h3>
          <p>Compose a Farcaster cast, configure pricing and deploy listings from the UI.</p>
          <ul>
            <li>Use guided onboarding to set property basics, pricing and booking policies.</li>
            <li>Launch your listing directly from the console — the platform handles deployment.</li>
            <li>Monitor availability and confirm deposits with the built-in tools.</li>
          </ul>
          <div class="role-actions">
            <a class="btn secondary" href="./landlord.html">Open landlord console</a>
            <a class="btn outline" href="./admin.html">Manage deposits</a>
          </div>
        </div>
        <div class="role-panel" data-role-panel="agent" role="tabpanel" hidden>
          <h3>Agent onboarding</h3>
          <p>Manage fundraising rounds, subletting and rent distribution for curated listings.</p>
          <ul>
            <li>Load your agent contract to review fundraising progress and investor metrics.</li>
            <li>Open or close tokenisation rounds and record rent directly from the console.</li>
            <li>Withdraw agent fees and coordinate sub-bookings without leaving the Mini App.</li>
          </ul>
          <div class="role-actions">
            <a class="btn secondary" href="./agent.html">Open agent console</a>
          </div>
        </div>
        <div class="role-panel" data-role-panel="investor" role="tabpanel" hidden>
          <h3>Investor onboarding</h3>
          <p>Track tokenised bookings, SQMU-R positions and live rent accruals.</p>
          <ul>
            <li>Connect your wallet to surface bookings where you hold SQMU-R.</li>
            <li>Review fundraising caps, sold supply and rent distribution timing per booking.</li>
            <li>Claim accumulated rent in a single click directly from the dashboard.</li>
          </ul>
          <div class="role-actions">
            <a class="btn primary" href="./investor.html">Open investor dashboards</a>
          </div>
        </div>
      </div>
    </section>

    <section id="how-it-works">
      <h2>How it works</h2>
      <div class="grid">
        <div class="card">
          <strong>For Tenants</strong>
          <ol class="muted" style="margin:8px 0 0; padding-left:18px">
            <li>Browse available listings and review the linked Cast for photos or details.</li>
            <li>Book the property and pay rent and deposit in USDC.</li>
            <li>When you vacate, deposit is released on-chain.</li>
          </ol>
        </div>
        <div class="card">
          <strong>For Landlords</strong>
          <ol class="muted" style="margin:8px 0 0; padding-left:18px">
            <li>Create a listing and attach your Farcaster Cast.</li>
            <li>Set deposit and optional daily/weekly/monthly rates.</li>
            <li>Deposit stays in escrow on-chain; release requires both your and the platform’s signature.</li>
          </ol>
        </div>
      </div>
    </section>

<section>
  <h2>Built by SQMU</h2>
  <div class="card">
    <p class="muted" style="margin:0">
      r3nt is a glimpse of what happens when rentals run on-chain without friction.<br><br>
      Behind it is SQMU, the Prime Standard for tokenised real estate, where <strong>1 SQMU = 1 Square Metre</strong> — simple, measurable, global.<br><br>
      From renting to owning, SQMU is building the framework that turns property into an on-chain stable asset.
    </p>
    <div class="cta-row" style="margin-top:10px">
      <a class="btn" href="https://sqmu.net/sqmu">Discover SQMU</a>
    </div>
  </div>
</section>

    <footer>
      r3nt by SQMU. USDC. Arbitrum.
    </footer>
  </div>

  <script type="module">
    import { sdk } from 'https://esm.sh/@farcaster/miniapp-sdk';
    import { APP_VERSION } from './js/config.js';
    import createBackController from './js/back-navigation.js';

    const applyVersionBadge = () => {
      const badge = document.querySelector('[data-version]');
      if (badge) badge.textContent = `Build ${APP_VERSION}`;
    };

    const backButton = document.querySelector('[data-back-button]');
    const backController = createBackController({ sdk, button: backButton });
    backController.update();

    const setupRoleSelector = () => {
      const buttons = Array.from(document.querySelectorAll('[data-role-button]'));
      const panels = Array.from(document.querySelectorAll('[data-role-panel]'));
      if (!buttons.length || !panels.length) return;

      const activate = (role) => {
        buttons.forEach((button) => {
          const isActive = button.dataset.roleButton === role;
          button.setAttribute('aria-selected', isActive ? 'true' : 'false');
        });
        panels.forEach((panel) => {
          const isMatch = panel.dataset.rolePanel === role;
          panel.classList.toggle('active', isMatch);
          if (isMatch) {
            panel.removeAttribute('hidden');
          } else {
            panel.setAttribute('hidden', '');
          }
        });
      };

      for (const button of buttons) {
        button.addEventListener('click', () => {
          activate(button.dataset.roleButton);
        });
      }

      const defaultRole = (buttons.find((btn) => btn.getAttribute('aria-selected') === 'true') || buttons[0])?.dataset.roleButton;
      if (defaultRole) {
        activate(defaultRole);
      }
    };

    const boot = () => {
      applyVersionBadge();
      setupRoleSelector();
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', boot);
    } else {
      boot();
    }

    (async () => {
      try { await sdk.actions.ready(); } catch {}
      setTimeout(() => { try { sdk.actions.ready(); } catch {} }, 800);
    })();
  </script>
</body>
</html>
