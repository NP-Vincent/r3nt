<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>r3nt View Pass</title>

  <meta name="fc:miniapp" content='{"version":"1","imageUrl":"https://r3nt.sqmu.net/assets/icon.png","button":{"title":"Open r3nt","action":{"type":"launch_miniapp","name":"r3nt","url":"https://r3nt.sqmu.net/index.html","splashImageUrl":"https://r3nt.sqmu.net/assets/splashscreen.png","splashBackgroundColor":"#FFFFFF"}}}' />

  <link rel="stylesheet" href="./styles/theme.css" />

  <script src="./js/dev-settings.js"></script>
  <script src="./js/dev-error-console.js"></script>
</head>
<body class="page-compact">
  <header>
    <div class="brand">r3nt by SQMU</div>
  </header>

  <div class="muted beta-note">early beta.</div>

  <nav>
    <button type="button" class="back-button" data-back-button hidden aria-label="Go back">
      <span aria-hidden="true">←</span>
      Back
    </button>
    <a href="./index.html">Home</a>
    <a href="./tenant.html">Tenant</a>
    <a href="./landlord.html">Landlord</a>
    <a href="./investor.html">Investor</a>
    <a href="./agent.html">Agent</a>
    <span class="version-badge" data-version></span>
  </nav>
  <div id="notificationTray" class="notification-tray"></div>
  <h1>r3nt View Pass</h1>
  <button id="connect">Connect Wallet</button>
  <div id="address">Not connected</div>
  <button id="buy" disabled>Buy View Pass</button>
  <div id="status">Loading…</div>
  <div class="planner-card">
    <h2>Plan your stay</h2>
    <p>Choose dates and how often you'd like to pay to preview totals before booking.</p>
    <div class="planner-grid">
      <div class="planner-inputs">
        <label>Check-in
          <input type="date" id="startDate">
        </label>
        <label>Check-out
          <input type="date" id="endDate">
        </label>
        <label>How often you'll pay rent
          <select id="paymentPeriod">
            <option value="">Select how often…</option>
            <option value="day">Daily</option>
            <option value="week">Weekly</option>
            <option value="month">Monthly</option>
          </select>
        </label>
      </div>
      <div class="planner-summary" id="bookingSummary">
        <div class="summary-header">
          <div class="summary-title" data-summary-title>No listing selected</div>
          <div class="summary-subtitle" data-summary-subtitle>Select a property to preview totals.</div>
        </div>
        <dl class="summary-breakdown">
          <div><dt>Stay length</dt><dd data-summary-nights>—</dd></div>
          <div><dt>Deposit <span class="info-dot" title="Deposits are escrowed on-chain and require landlord and platform approval before release.">?</span></dt><dd data-summary-deposit>—</dd></div>
          <div><dt>Total rent</dt><dd data-summary-rent>—</dd></div>
          <div><dt>Installments</dt><dd data-summary-installment>—</dd></div>
          <div><dt>Due today</dt><dd data-summary-total>—</dd></div>
        </dl>
        <button id="confirmBooking" disabled>Confirm booking</button>
        <div class="summary-footnote" data-summary-notice>Select stay dates to continue.</div>
      </div>
    </div>
  </div>
  <section id="bookingsSection" class="bookings-card">
    <div class="bookings-header">
      <h2>Your bookings</h2>
      <button type="button" id="refreshBookings" class="inline-button small" disabled>Refresh</button>
    </div>
    <div class="bookings-status" data-bookings-status>Connect wallet to view bookings.</div>
    <div id="bookingsList" class="bookings-list"></div>
    <div id="tokenProposalPanel" class="token-proposal-card" hidden>
      <h3>Propose tokenisation</h3>
      <div class="token-proposal-context">
        <strong data-token-proposal-context>Select a booking to propose tokenisation.</strong>
        <div class="token-proposal-meta" data-token-proposal-meta></div>
      </div>
      <div class="muted token-proposal-note">Set the SQMU supply, price and cadence to request platform approval for tokenising this stay.</div>
      <form id="tokenProposalForm" class="token-proposal-form">
        <div class="field-grid columns-2">
          <label class="field-option">
            <span class="status-dot" aria-hidden="true"></span>
            <div class="field-content">
              <span class="field-title">Total SQMU</span>
              <span class="field-hint">Number of SQMU-R tokens to mint if approved.</span>
              <input id="tokenTotalSqmu" inputmode="numeric" pattern="[0-9]*" placeholder="1000">
            </div>
          </label>
          <label class="field-option">
            <span class="status-dot" aria-hidden="true"></span>
            <div class="field-content">
              <span class="field-title">Price per SQMU (USDC)</span>
              <span class="field-hint">Up to 6 decimals.</span>
              <input id="tokenPricePerSqmu" inputmode="decimal" placeholder="500.00">
            </div>
          </label>
        </div>
        <div class="field-grid columns-2">
          <label class="field-option">
            <span class="status-dot" aria-hidden="true"></span>
            <div class="field-content">
              <span class="field-title">Platform fee (bps)</span>
              <span class="field-hint">0 – 10000 basis points.</span>
              <input id="tokenFeeBps" inputmode="numeric" pattern="[0-9]*" placeholder="250">
            </div>
          </label>
          <label class="field-option">
            <span class="status-dot" aria-hidden="true"></span>
            <div class="field-content">
              <span class="field-title">Distribution period</span>
              <span class="field-hint">Matches the rent cadence.</span>
              <select id="tokenPeriod">
                <option value="">Select period…</option>
                <option value="day">Daily</option>
                <option value="week">Weekly</option>
                <option value="month">Monthly</option>
              </select>
            </div>
          </label>
        </div>
        <div class="token-proposal-actions">
          <button type="submit" id="tokenProposalSubmit">Submit proposal</button>
          <button type="button" id="tokenProposalCancel" class="inline-button">Cancel</button>
          <span id="tokenProposalStatus" class="token-proposal-status" aria-live="polite"></span>
        </div>
      </form>
    </div>
  </section>
  <h2>Listings</h2>
  <div id="listings"></div>
  <footer>
    r3nt by SQMU. USDC. Arbitrum.
  </footer>
  <script type="module" src="./js/tenant.js"></script>
</body>
</html>
