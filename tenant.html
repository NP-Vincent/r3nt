<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>r3nt View Pass</title>

  <meta name="fc:miniapp" content='{"version":"1","imageUrl":"https://r3nt.sqmu.net/assets/icon.png","button":{"title":"Open r3nt","action":{"type":"launch_miniapp","name":"r3nt","url":"https://r3nt.sqmu.net/index.html","splashImageUrl":"https://r3nt.sqmu.net/assets/splashscreen.png","splashBackgroundColor":"#FFFFFF"}}}' />

  <link rel="stylesheet" href="./styles/theme.css" />

  <script src="./js/dev-settings.js"></script>
  <script src="./js/dev-error-console.js"></script>
</head>
<body class="page-compact">
  <header>
    <div class="brand">r3nt by SQMU</div>
  </header>

  <div class="muted beta-note">early beta.</div>

  <nav>
    <button type="button" class="back-button" data-back-button hidden aria-label="Go back">
      <span aria-hidden="true">←</span>
      Back
    </button>
    <a href="./index.html">Home</a>
    <a href="./tenant.html">Tenant</a>
    <a href="./landlord.html">Landlord</a>
    <a href="./investor.html">Investor</a>
    <a href="./agent.html">Agent</a>
    <span class="version-badge" data-version></span>
  </nav>
  <div id="notificationTray" class="notification-tray"></div>
  <h1>r3nt View Pass</h1>

  <section class="card">
    <h2>Wallet &amp; View Pass</h2>
    <p class="muted">Connect your wallet to unlock bookings, manage stays and keep your View Pass active.</p>
    <div class="card-actions">
      <button id="connect">Connect Wallet</button>
      <button id="buy" disabled>Buy View Pass</button>
    </div>
    <div id="address">Not connected</div>
    <div id="status">Waiting for wallet connection.</div>
  </section>

  <section id="bookingsSection" class="card" data-collapsible data-open="1">
    <button type="button" class="inline-button collapsible-toggle" data-collapsible-toggle>
      Your bookings
    </button>
    <div data-collapsible-content>
      <p class="muted">Active and past stays linked to your connected wallet.</p>
      <div class="bookings-status" data-bookings-status>Connect wallet to view bookings.</div>
      <div id="bookingControls" class="listing-controls" hidden>
        <label>
          <span>Show</span>
          <select id="bookingFilter">
            <option value="active">Active bookings</option>
            <option value="all">All bookings (cancelled hidden)</option>
          </select>
        </label>
      </div>
      <div id="bookingsList" class="bookings-list"></div>
      <div id="tokenProposalPanel" class="token-proposal-card" hidden></div>
    </div>
  </section>

  <section class="card planner-card" data-planner-card data-collapsible data-open="1">
    <button type="button" class="inline-button collapsible-toggle" data-collapsible-toggle>
      Plan your stay
    </button>
    <div data-collapsible-content>
      <p class="muted">Explore listings and configure your stay details. The booking form appears when you choose a property.</p>
      <div class="planner-layout">
        <div class="planner-form" data-planner-form hidden>
          <div class="planner-grid">
            <div class="planner-inputs">
              <label>Check-in
                <input type="date" id="startDate">
              </label>
              <label>Check-out
                <input type="date" id="endDate">
              </label>
              <label>How often you'll pay rent
                <select id="paymentPeriod">
                  <option value="">Select how often…</option>
                  <option value="day">Daily</option>
                  <option value="week">Weekly</option>
                  <option value="month">Monthly</option>
                </select>
              </label>
            </div>
            <div class="planner-summary" id="bookingSummary">
              <div class="summary-header">
                <div class="summary-title" data-summary-title>No listing selected</div>
                <div class="summary-subtitle" data-summary-subtitle>Select a property to preview totals.</div>
              </div>
              <dl class="summary-breakdown">
                <div><dt>Stay length</dt><dd data-summary-nights>—</dd></div>
                <div><dt>Deposit <span class="info-dot" title="Deposits are escrowed on-chain and require landlord and platform approval before release.">?</span></dt><dd data-summary-deposit>—</dd></div>
                <div><dt>Total rent</dt><dd data-summary-rent>—</dd></div>
                <div><dt>Installments</dt><dd data-summary-installment>—</dd></div>
                <div><dt>Due today</dt><dd data-summary-total>—</dd></div>
              </dl>
              <button id="confirmBooking" disabled>Confirm booking</button>
              <div class="summary-footnote" data-summary-notice>Select stay dates to continue.</div>
            </div>
          </div>
        </div>
        <div class="planner-listings">
          <h3>Available listings</h3>
          <p class="muted" data-planner-empty>Select a listing to open the booking form.</p>
          <div id="listingControls" class="listing-controls" hidden>
            <label>
              <span>Sort by</span>
              <select id="listingSort">
                <option value="created-desc">Newest → Oldest</option>
                <option value="created-asc">Oldest → Newest</option>
                <option value="price-asc">Base price: Low → High</option>
                <option value="price-desc">Base price: High → Low</option>
              </select>
            </label>
            <label>
              <span>Location filter</span>
              <input id="listingLocationFilter" placeholder="Latitude,Longitude" autocomplete="off" spellcheck="false" />
            </label>
            <button type="button" id="listingLocationDetect" class="inline-button">Detect location</button>
            <button type="button" id="listingLocationClear" class="inline-button">Clear</button>
          </div>
          <div id="listings"></div>
        </div>
      </div>
    </div>
  </section>
  <footer>
    r3nt by SQMU. USDC. Arbitrum.
  </footer>
  <script type="module" src="./js/tenant.js"></script>
</body>
</html>
